**计算机网络及应用实验**

## **实验二 常用网络服务的配置**

祝尔乐 2020013020

### 1. 实验目的

通过实验熟悉常用网络服务的基本原理和基于客户机/服务器的服务模式，掌握各项服务的服务原理，练习常用网络服务的配置方法。

### 2. 实验内容

#### Ch2.2 DNS 服务器的配置

分别在两台计算机上搭建DNS Server和Client，在服务器上配置域名，并能进行正向查找和反向查找。

#### Ch2.3 用 Apache HTTP Server 和 Flask 开设 WWW 服务

用flask实现一个支持访问量统计、图片刷新等功能的基于HTTP的网页服务器，先在本地调试，再将其部署到Apache上。

#### Ch2.4 架设 FTP 服务器

两位同学分别搭建FTP服务器，创建只读、读写的账户，并互相检验。

#### Ch2.5 DHCP 服务器的配置

分别在两台计算机上搭DHCP Server和Client，在服务器上配置作用域，实现为客户机分配地址。

### 3. 实验步骤

#### Ch2.2 DNS 服务器的配置

分工上我主要负责搭建Server。

步骤如下：

* 打开Windows Server 2003操作系统，由于DNS服务器已经安装，可直接打开

* 配置DNS服务器，创建正反向搜索区域，实现`test.local`和`192.168.1`的相互映射

* 在正反向区域中新建主机，将客户机和主机添加到资源记录中

#### Ch2.3 用 Apache HTTP Server 和 Flask 开设 WWW 服务

* 用python+flask实现一个支持访问量统计、图片刷新等功能的网页服务器

* 先在http://127.0.0.1:5000上进行调试

* 启动Apache Server，并完成基本配置

* 将网页服务器部署到Apache上，可通过http://localhost 访问

#### Ch2.4 架设 FTP 服务器

* 在Serv-U上完成FTP服务器的基本配置

* 创建一个新用户，设置权限为只读

* 创建一个新用户，设置权限为读写

* 与队友互相访问对方的FTP服务器，通过上传，下载检测用户权限

#### Ch2.5 DHCP 服务器的配置

分工上我主要负责搭建Server。

* 创建DHCP作用域，设置IP地址范围，设置排除地址

* 设置用户的保留地址

* 启动服务器，可在客户机上用`ipconfig /release`，`ipconfig /renew`申请IP地址。

### 4. 思考题

#### Ch2.2 DNS 服务器的配置

（1）存储在 DNS 数据库中的数据是静态的还是动态的？如何更新？

> 储存在是动态的，可以在动态查询中进行更新。

（2）在创建的 DNS 中添加了正向搜索的主机记录，为什么还要添加反向搜索记录？

> 这是因为我们不仅希望用户可以从域名解析到其对应的IP地址（正向查找），还希望从IP地址解析到其对应的域名（反向查找）。

（3）在上级域名服务器中修改某域名对应的 IP 地址且配置正确，在客户端测试中发现没有生效，为什么？

> 可能是因为DNS存在缓存，需要等待一段时间，或者手动清除缓存后才能生效。

（4）实验中只给出了添加主机记录的部分，如果在该域中要添加一个下级子域，如何操作？

 进入该域，然后右键，新建域即可在该域中建立子域。

#### Ch2.3 用 Apache HTTP Server 和 Flask 开设 WWW 服务

(1) 在 conf/httpd.conf 中，了解其他选项，比如，如何修改服务器 IP 地址和端口，
默认首页文件名，如何设置虚拟目录等。

> 在观察`conf/httpd.conf`文件后, 我了解了以下选项：
> 
> 服务器IP地址：可在 #ServerName 处修改；
> 
> 服务器端口：Listen xx 监听的端口，可以在此处修改；
> 
> 默认首页文件名：DirectoryIndex index.html index.html.var，可以在此处修改，默认首页文件名为index.html；
> 
> 虚拟目录：可以在IfModule部分添加如下代码, 设置虚拟目录。
> 
> ```
> <IfModule dir_module>
>     ...
> </IfModule>
> ```


(2) Nginx是近年来另一款非常流行的HTTP服务器。请比较Apache HTTP Server与Nginx的区别和优劣。

> * 安全稳定性。从目前发布的补丁趋势来看，Apache的漏洞远多于Nginx。安全性Nginx优于Apache，但Apache在稳定上优于Nginx。
> 
> * 功能。Apache的模块要多于Ngnix，功能更为丰富。
> 
> * 特性。Nginx的优点之一是轻量级，比Apache占用更少的内存和资源，并且并发性能更好。当然，Nginx对PHP的支持在高并发的情况下不如Apache好。
> 
> * 应用。Nginx多用于小型服务器或反向代理，Apache可用于大型后端服务器。

 (3) 在访问量统计功能中，用户的访问数据是被存储在数据库里的，这里我们使用的是
基于文件的数据库 SQLite。数据存储在哪个文件中？阅读代码，visitor 数据表中包含了哪
些信息？

> 数据存在`./db.sqlite3`文件中。
> 
> visitor数据表中有访客的ip地址`ip_address`，和访问网页的时间`access_time`。

(4) 除了 Flask 外，还有哪些 Web 编程框架？请举出至少三个，并分别简述其使用的编
程语言和主要特点。

> * **Django**: 流行的全堆栈框架之一，提供了很多现成的功能，比如REST API支持。注重代码重用，从而提高了开发速度。它也是一个非常安全的框架。面向Python框架，可能速度不够。
> 
> * **ASP.Net**：一个开源的、独立于平台的框架，用于在平台上构建web应用程序。基于NET平台，被认为是性能最好的后端框架之一，但不支持全栈开发。
> 
> * **Express.js**：在Javascript平台，JavaScript是最流行的web开发语言，而且可能是唯一一种提供从前端到后端到移动学习的全堆栈开发的语言，Express是一种较为方便的框架。

#### Ch2.4 架设 FTP 服务器

无

#### Ch2.5 DHCP 服务器的配置

（1）DHCP 服务器是否可以选择自动获得 IP 地址？

> 可以。DHCP（动态主机配置协议）指的就是由服务器控制一段IP地址范围，客户机登录服务器时就可以自动获得服务器分配的IP地址和子网掩码。

（2）DHCP 服务为何要实现保留 IP 地址功能，其在网络地址管理中有什么好处？在作保留 IP 地址时，为什么要先记录需保留 IP 地址的客户机的网卡的物理地址？

> 由于网络中某些计算机需要每次都获得相同的IP地址，DHCP服务器实现保留 IP 地址功能会将特定的IP地址与指定网卡的MAC地址绑定，使该DHCP客户端每次向DHCP服务器请求时，都会获得同一个IP地址。而由于DHCP实现保留功能时需要将MAC地址和IP地址绑定，所以需要先记录需保留 IP 地址的客户机的网卡的物理地址。

（3）客户计算机从 DHCP 服务器获得租约要经过几个步骤？

> 4个步骤。
> 
> ①**客户机请求IP租约**：DHCP客户机使用0.0.0.0的地址作为源地址，UDP68端口作为源端口，使用255.255.255.255作为目标地址，UDP67端口作为目的端口来广播DHCPDISCOVER请求IP地址信息，广播信息中包含了DHCP客户机的MAC地址和计算机名，以便使DHCP服务器能确定是哪个客户机发送的请求。
> 
> ②**服务器提供IP租约**：当DHCP服务器接收到客户机请求IP地址的信息后，在自己的IP地址池中查找是否有合法的IP地址提供给客户机。如果有，将此IP地址做上标记，加入到DHCPOFFER的消息中，然后DHCP服务器进行广播。
> 
> ③**客户机选择IP租约**：DHCP客户机从接收到的DHCPOFFER消息中选择IP地址，将DHCPREQUEST消息广播到所有的DHCP服务器，表明它接受提供的内容。客户机DHCP服务器确定它自己是否被选择为指定的客户机提供IP地址，发出IP地址的DHCP服务器将该地址保留，这样该地址就不能提供给另一个DHCP客户机，而被拒绝的服务器会会取消提供并保留其IP地址以用于下一个IP租约请求。
> 
> ④**服务器确认IP租约**：DHCP服务器接收到DHCPREQUEST消息后，以DHCPACK消息的形式向客户机广播成功的确。当客户机收到DHCPACK消息时，它就配置了IP地址，完成TCP/IP的初始化。

（4）如果客户机设置了自动获取IP地址，当登录到局域网后，用ipconfig查看IP地址时，显示的 IP 地址为 169.254.16.2，可以判断有什么问题？

> 这表示表示客户机无法得到DHCP的响应。可能是没有DHCP服务器或者链接有问题。

（5）假设为 DHCP 服务器创建一个名为 shixun 的作用域，该作用域 IP 地址的范围是192.168.0.1~192.168.0.254，可否包括 192.168.0.0 和 192.168.0.255 这两个地址？

> 不可以，这两个地址不在作用域中。


